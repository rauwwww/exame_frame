


<h2>Create new stock message</h2> <button class="btn btn-success" (click)="logout()">Logout</button>
<form (ngSubmit)="submitStock()">
    <div class="form-group">
    <label for="name">StockName</label>
    <input type="text"  class="form-control" id="name"
            required
            [(ngModel)]="model.name" name="name">
    </div>
    <button ng-click="submitStock()" type="submit" class="btn btn-large btn-block btn-info">Add stock</button>
</form>

<hr>

    <h1>All Stocks!</h1>

    <div class="row">
    <div class="panel panel-default col-sm-12"  *ngFor="let message of stockList">
 
        <div class="row">
            <div class="col-sm-6">
                <h2 class="li-header"> {{ message.name }} </h2>
            </div>
            <div class="col-sm-2 col-sm-offset-4" style="margin-top:25px">
                <div *ngIf="newPrice.indexOf(message._id)">
                        <form [formGroup]="priceForm">
                            <input type="text" class="form-control" formControlName="price">
                            <button type="submit" name="button" class="btn btn-block btn-info pull-right" (click)="submitPrice(message._id)">Add Price</button>
                            <button type="submit" name="button" class="btn btn-block btn-info pull-right" (click)="removeStock(message._id)">Remove Stock</button>
                        </form>
                </div>
            </div>
        </div>
        <table class="table table-striped">
                <thead>
                        <tr>
                          <th>Price</th>
                          <th>Time</th>
                        </tr>
                </thead>
                <tbody class="panel-body" *ngFor="let stockPrice of message.stockPrice"> 
                        
                        <tr *ngIf="stockPrice?.price">
                            <td>{{stockPrice.price}} $</td>
                            <td>{{stockPrice.date | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                        </tr>      
                        
                        <tr *ngIf="stockPrice.price?.lenght < 0">
                            <td>Nothing to see here</td></tr>
                </tbody>
        </table>
 
        </div>
    </div>


